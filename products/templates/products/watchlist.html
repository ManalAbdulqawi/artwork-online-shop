{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
<div class="container mt-5 d-flex flex-column align-items-center"></div>
        <div class="row">
            <div class="col">
                 <div class="backgroundlayer "></div>
<br/>
<h2 class="text-black text-center mt-5">My Watchlist</h2>
{% if watchlist_items %}
        <div class="row justify-content-center vh-100  m-5">
            {% for item in watchlist_items %}
            <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3 mb-2">
                <div class="card  h-100 border-1 border-black">
                    <div class="image-container my-3 text-center">
                        {% if item.product.first_image %}
                        <img class="img-fluid" src="{{ item.product.first_image.image.url }}" alt="{{ item.product.name }}">
                        {% else %}
                        <img class="img-fluid" src="{{ MEDIA_URL }}noimage.png" alt="{{ item.product.name }}">
                        {% endif %}
                    </div>
                    <div class="card-body text-center d-flex flex-column align-items-center">
                        <a class="text-black" href="{% url 'product_detail' item.product.id %}">{{ item.product.name }}</a>
                        <form method="post" action="{% url 'remove_from_watchlist' item.product.id %}" class="mt-2">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm mt-2"><i class="fa-solid fa-trash"></i> Remove</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="mt-4 text-black text-center vh-100">Your watchlist is empty.</p>
    {% endif %}
</div>
{% endblock %}